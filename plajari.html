<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Plajari Sukoharjo Corporate University</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: Montserrat !important;
      margin: 0;
      padding: 0;
      background: #f7f7f7;
      color: #333;
    }

    header {
      text-align: center;
      background: url("backmooc.png") no-repeat center center;
      background-size: cover;
      padding: 50px 0;
    }

    header h1 {
      margin: 0;
      font-size: 35px;
      font-weight: heavy;
      color: #1B3C53;
    }
    
    header h2 {
      margin: 0;
      font-size: 33px;
      font-weight: heavy;
      color: #8C1007;
    }
    
    nav {
      display: flex;
      justify-content: center;
      width: 100%;
      margin: 0;
      padding: 0;
    }
    
    nav button {
      flex: 1;
      padding: 12px;
      border: none;
      background: #456882;
      color: #fff;
      font-family: Montserrat;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      transition: background 0.3s ease;
    }

    nav button.active, nav button:hover {
      background: #1B3C53;
      color: #FFF0C4;
      font-weight: 600;
    }

    .container {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 20px;
      padding: 20px;
      max-width: 1200px;
      margin: auto;
    }

    .card {
      background: #fff;
      border-radius: 12px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      overflow: hidden;
      display: flex;
      flex-direction: column;
      text-align: center;
      transition: transform 0.2s ease;
    }

    .card:hover {
      transform: translateY(-5px);
    }

    .card img {
      width: 100%;
      height: 160px;
      object-fit: cover;
    }

    .card h3 {
      margin: 15px 10px;
      font-size: 18px;
      color: #1B3C53;
    }

    .card a {
      display: block;
      background: #1B3C53;
      color: #fff;
      text-decoration: none;
      padding: 12px;
      margin: 10px 15px;
      border-radius: 8px;
      transition: background 0.3s ease;
      font-weight: bold;
    }

    .card a:hover {
      background: #28a745;
    }

    .card button {
      background: #6c757d;
      font-family: Montserrat;
      color: #fff;
      border: none;
      padding: 10px;
      margin: 0 15px 15px 15px;
      border-radius: 8px;
      cursor: pointer;
      font-weight: bold;
      transition: background 0.3s ease;
    }

    .card button.read {
      background: #28a745 !important;
    }

    footer {
      text-align: center;
      padding: 15px;
      background: #1B3C53;
      color: #fff;
      margin-top: 30px;
    }

    .card button.eval {
      background: #0d6efd;
      margin-bottom: 10px;
      margin-above: 10px;
    }

    .card button.eval:hover {
      background: #084298;
    }

    footer {
      text-align: center;
      padding: 15px;
      background: #1B3C53;
      color: #fff;
      margin-top: 30px;
    }

      .card button.sertif {
      background: #061E29;
      margin-bottom: 15px;
    }

    .card button.sertif:hover {
      background: #1D546D;
    }

    footer {
      text-align: center;
      padding: 15px;
      background: #1B3C53;
      color: #fff;
      margin-top: 30px;
    }

    .card button:disabled {
      background: #adb5bd !important;
      cursor: not-allowed;
      opacity: 0.7;
    }

    .progress-wrapper {
      margin: 10px 15px;
      background: #e9ecef;
      border-radius: 10px;
      height: 10px;
      overflow: hidden;
    }

    .progress-bar {
      height: 100%;
      width: 0%;
      background: linear-gradient(90deg, #28a745, #20c997);
      transition: width 0.4s ease;
    }

    .progress-text {
      font-size: 12px;
      margin: 5px 15px 0;
      color: #555;
      font-weight: 600;
    }

    @media (max-width: 480px) {
      body {
        font-family: Montserrat !important;
        margin: 0;
        padding: 0;
        color: #333;
      }
      
      header h1 {
        margin: 0;
        font-size: 18px;
        font-weight: 700;
        color: #1B3C53;
      }
    
      header h2 {
        margin: 0;
        font-size: 17px;
        font-weight: 600;
        color: #8C1007;
      }
    }
  </style>
</head>
<body>

  <header>
    <h1>Platform Belajar Mandiri (PLAJARI)</h1>
    <h2>Sukoharjo Corporate University</h2>
  </header>

  <!-- Menu navigasi -->
  <nav>
    <button id="btn-all" class="active">Semua Materi</button>
    <button id="btn-unread">Belum Dibaca</button>
    <button id="btn-read">Sudah Dibaca</button>
  </nav>

  <main>
    <div class="container" id="materi-container"></div>
  </main>

  <footer>
    <p>&copy; 2025 Plajari Sukoharjo Corporate University</p>
  </footer>

  <script>
    // Daftar Materi
    const materiList = [
      {id:1, judul:"Penyusunan Probis", img:"../gambarmateri/probis.jpg", link:"https://sukodrive.sukoharjokab.go.id/s/BimzawMJbL7TjJ7", sertifikat: "https://www.sipenata.sukoharjokab.go.id/bangkom/ajukan-sertifikat-digital", download:"https://www.sipenata.sukoharjokab.go.id/bangkom/ajukan-sertifikat-digital"},
      {id:2, judul:"Manajemen Risiko", img:"https://via.placeholder.com/300x160?text=Materi+2", link:"https://drive.google.com/", sertifikat: "https://www.sipenata.sukoharjokab.go.id/bangkom/ajukan-sertifikat-digital", download:"https://www.sipenata.sukoharjokab.go.id/bangkom/ajukan-sertifikat-digital"},
      {id:3, judul:"Public Speaking", img:"https://via.placeholder.com/300x160?text=Materi+3", link:"https://drive.google.com/", sertifikat: "https://www.sipenata.sukoharjokab.go.id/bangkom/ajukan-sertifikat-digital", download:"https://www.sipenata.sukoharjokab.go.id/bangkom/ajukan-sertifikat-digital"},
      {id:4, judul:"Pelatihan IT Dasar", img:"https://via.placeholder.com/300x160?text=Materi+4", link:"https://drive.google.com/", sertifikat: "https://www.sipenata.sukoharjokab.go.id/bangkom/ajukan-sertifikat-digital", download:"https://www.sipenata.sukoharjokab.go.id/bangkom/ajukan-sertifikat-digital"},
      {id:5, judul:"Komunikasi Efektif", img:"https://via.placeholder.com/300x160?text=Materi+5", link:"https://drive.google.com/", sertifikat: "https://www.sipenata.sukoharjokab.go.id/bangkom/ajukan-sertifikat-digital", download:"https://www.sipenata.sukoharjokab.go.id/bangkom/ajukan-sertifikat-digital"},
      {id:6, judul:"Manajemen Kepegawaian", img:"https://via.placeholder.com/300x160?text=Materi+6", link:"https://drive.google.com/", sertifikat: "https://www.sipenata.sukoharjokab.go.id/bangkom/ajukan-sertifikat-digital", download:"https://www.sipenata.sukoharjokab.go.id/bangkom/ajukan-sertifikat-digital"},
      {id:7, judul:"Pelayanan Publik", img:"https://via.placeholder.com/300x160?text=Materi+7", link:"https://drive.google.com/", sertifikat: "https://www.sipenata.sukoharjokab.go.id/bangkom/ajukan-sertifikat-digital", download:"https://www.sipenata.sukoharjokab.go.id/bangkom/ajukan-sertifikat-digital"},
      {id:8, judul:"Literasi Digital", img:"https://via.placeholder.com/300x160?text=Materi+8", link:"https://drive.google.com/", sertifikat: "https://www.sipenata.sukoharjokab.go.id/bangkom/ajukan-sertifikat-digital", download:"https://www.sipenata.sukoharjokab.go.id/bangkom/ajukan-sertifikat-digital"},
      {id:9, judul:"Anti Korupsi", img:"https://via.placeholder.com/300x160?text=Materi+9", link:"https://drive.google.com/", sertifikat: "https://www.sipenata.sukoharjokab.go.id/bangkom/ajukan-sertifikat-digital", download:"https://www.sipenata.sukoharjokab.go.id/bangkom/ajukan-sertifikat-digital"},
      {id:10, judul:"Manajemen Keuangan", img:"https://via.placeholder.com/300x160?text=Materi+10", link:"https://drive.google.com/", sertifikat: "https://www.sipenata.sukoharjokab.go.id/bangkom/ajukan-sertifikat-digital", download:"https://www.sipenata.sukoharjokab.go.id/bangkom/ajukan-sertifikat-digital"},
      {id:11, judul:"Kedisiplinan", img:"https://via.placeholder.com/300x160?text=Materi+11", link:"https://drive.google.com/", sertifikat: "https://www.sipenata.sukoharjokab.go.id/bangkom/ajukan-sertifikat-digital", download:"https://www.sipenata.sukoharjokab.go.id/bangkom/ajukan-sertifikat-digital"},
      {id:12, judul:"Teamwork & Kolaborasi", img:"https://via.placeholder.com/300x160?text=Materi+12", link:"https://drive.google.com/", sertifikat: "https://www.sipenata.sukoharjokab.go.id/bangkom/ajukan-sertifikat-digital", download:"https://www.sipenata.sukoharjokab.go.id/bangkom/ajukan-sertifikat-digital"},
      {id:13, judul:"Kreativitas & Inovasi", img:"https://via.placeholder.com/300x160?text=Materi+13", link:"https://drive.google.com/", sertifikat: "https://www.sipenata.sukoharjokab.go.id/bangkom/ajukan-sertifikat-digital", download:"https://www.sipenata.sukoharjokab.go.id/bangkom/ajukan-sertifikat-digital"},
      {id:14, judul:"Administrasi", img:"https://via.placeholder.com/300x160?text=Materi+14", link:"https://drive.google.com/", sertifikat: "https://www.sipenata.sukoharjokab.go.id/bangkom/ajukan-sertifikat-digital", download:"https://www.sipenata.sukoharjokab.go.id/bangkom/ajukan-sertifikat-digital"},
      {id:15, judul:"Analisis Data", img:"https://via.placeholder.com/300x160?text=Materi+15", link:"https://drive.google.com/", sertifikat: "https://www.sipenata.sukoharjokab.go.id/bangkom/ajukan-sertifikat-digital", download:"https://www.sipenata.sukoharjokab.go.id/bangkom/ajukan-sertifikat-digital"},
      {id:16, judul:"Manajemen Bangkom", img:"https://via.placeholder.com/300x160?text=Materi+16", link:"https://drive.google.com/", sertifikat: "https://www.sipenata.sukoharjokab.go.id/bangkom/ajukan-sertifikat-digital", download:"https://www.sipenata.sukoharjokab.go.id/bangkom/ajukan-sertifikat-digital"},
      {id:17, judul:"Kearsipan", img:"https://via.placeholder.com/300x160?text=Materi+17", link:"https://drive.google.com/", sertifikat: "https://www.sipenata.sukoharjokab.go.id/bangkom/ajukan-sertifikat-digital", download:"https://www.sipenata.sukoharjokab.go.id/bangkom/ajukan-sertifikat-digital"},
      {id:18, judul:"K3 (Keselamatan Kerja)", img:"https://via.placeholder.com/300x160?text=Materi+18", link:"https://drive.google.com/", sertifikat: "https://www.sipenata.sukoharjokab.go.id/bangkom/ajukan-sertifikat-digital", download:"https://www.sipenata.sukoharjokab.go.id/bangkom/ajukan-sertifikat-digital"},
      {id:19, judul:"Protokol dan Humas", img:"https://via.placeholder.com/300x160?text=Materi+19", link:"https://drive.google.com/", sertifikat: "https://www.sipenata.sukoharjokab.go.id/bangkom/ajukan-sertifikat-digital", download:"https://www.sipenata.sukoharjokab.go.id/bangkom/ajukan-sertifikat-digital"},
      {id:20, judul:"Cyber Security", img:"https://via.placeholder.com/300x160?text=Materi+20", link:"https://drive.google.com/", sertifikat: "https://www.sipenata.sukoharjokab.go.id/bangkom/ajukan-sertifikat-digital", download:"https://www.sipenata.sukoharjokab.go.id/bangkom/ajukan-sertifikat-digital"}
    ];

// =======================
// KONFIGURASI
// =======================
const MIN_SECONDS = 24 * 60 * 60; // 24 jam

// =======================
// STATE (LOCAL STORAGE)
// =======================
let openedStatus  = JSON.parse(localStorage.getItem("openedStatus")) || {};
let printedStatus = JSON.parse(localStorage.getItem("printedStatus")) || {};
let startTime     = JSON.parse(localStorage.getItem("startTime")) || {};
let checklist     = JSON.parse(localStorage.getItem("checklist")) || {};

let currentFilter = "all";

// =======================
// DATA MATERI
// =======================
const materiList = [
  {
    id: 1,
    judul: "Penyusunan Probis",
    img: "../gambarmateri/probis.jpg",
    link: "https://sukodrive.sukoharjokab.go.id/s/BimzawMJbL7TjJ7",
    sertifikat: "https://LINK_CETAK_SERTIFIKAT",
    download: "https://LINK_DOWNLOAD_SERTIFIKAT"
  }
];

// =======================
// UTILITAS WAKTU
// =======================
function getLearningDuration(id) {
  if (!startTime[id]) return 0;
  return Math.floor((Date.now() - startTime[id]) / 1000);
}

function formatDuration(sec) {
  const h = Math.floor(sec / 3600);
  const m = Math.floor((sec % 3600) / 60);
  return `${h} jam ${m} menit`;
}

// =======================
// LOGIKA VALIDASI
// =======================
function canPrintCertificate(id) {
  const duration = getLearningDuration(id);
  const c = checklist[id] || {};
  return duration >= MIN_SECONDS && c.video && c.modul;
}

// =======================
// AKSI USER
// =======================
function markOpened(id) {
  openedStatus[id] = true;

  if (!startTime[id]) {
    startTime[id] = Date.now();
    localStorage.setItem("startTime", JSON.stringify(startTime));
  }

  localStorage.setItem("openedStatus", JSON.stringify(openedStatus));
  renderMateri(currentFilter);
}

function toggleChecklist(id, type) {
  if (!checklist[id]) checklist[id] = { video: false, modul: false };
  checklist[id][type] = !checklist[id][type];
  localStorage.setItem("checklist", JSON.stringify(checklist));
  renderMateri(currentFilter);
}

function openSertifikat(url, id) {
  printedStatus[id] = true;
  localStorage.setItem("printedStatus", JSON.stringify(printedStatus));
  window.open(url, "_blank");
  renderMateri(currentFilter);
}

function openDownload(url) {
  window.open(url, "_blank");
}

// =======================
// RENDER UI
// =======================
function renderMateri(filter) {
  currentFilter = filter;
  const container = document.getElementById("materiContainer");
  container.innerHTML = "";

  materiList.forEach(materi => {
    const isRead = openedStatus[materi.id];

    if (filter === "read" && !isRead) return;
    if (filter === "all" && isRead) return;

    const card = document.createElement("div");
    card.className = "card";

    card.innerHTML = `
      <img src="${materi.img}">
      <h3>${materi.judul}</h3>

      <a href="${materi.link}" target="_blank"
         onclick="markOpened(${materi.id})">
         <button>Lihat Materi</button>
      </a>

      ${filter === "read" && isRead ? `
        <div style="font-size:12px;margin:10px 0;font-weight:600;">
          ⏱️ Durasi Belajar: ${formatDuration(getLearningDuration(materi.id))}<br>
          <span style="color:red;">Minimal 24 jam</span>
        </div>

        <div style="text-align:left;font-size:13px;">
          <label>
            <input type="checkbox"
              ${checklist[materi.id]?.video ? "checked" : ""}
              onchange="toggleChecklist(${materi.id}, 'video')">
            Video sudah dipelajari
          </label><br>

          <label>
            <input type="checkbox"
              ${checklist[materi.id]?.modul ? "checked" : ""}
              onchange="toggleChecklist(${materi.id}, 'modul')">
            Modul sudah dipelajari
          </label>
        </div>

        <button
          ${!canPrintCertificate(materi.id) ? "disabled" : ""}
          onclick="openSertifikat('${materi.sertifikat}', ${materi.id})">
          Cetak Sertifikat
        </button>

        <button
          ${!printedStatus[materi.id] ? "disabled" : ""}
          onclick="openDownload('${materi.download}')">
          Download Sertifikat
        </button>
      ` : ""}
    `;

    container.appendChild(card);
  });
}

// =======================
// AUTO UPDATE TIMER
// =======================
setInterval(() => {
  if (currentFilter === "read") {
    renderMateri("read");
  }
}, 60000);

// =======================
// INIT
// =======================
renderMateri("all");
</script>


</body>
</html>
